---
- name: INSTALLING SAMBA
  hosts: all
  become: true

  tasks:
    - name: Installing packages
      ansible.builtin.package:
        name:
          - samba
          - samba-common
          - samba-client
        state: present	
    - name: Create a directory if it does not exist
      ansible.builtin.file:
        path: /srv/tecmint/data
        state: directory
        mode: '0755'
        owner: nobody
        group: nobody
    - name: Allow apache to modify files in /srv/tecmint/data
      community.general.sefcontext:
        target: '/srv/tecmint/data(/.*)?'
        setype: samba_share_t
        state: present
    - name: Apply new SELinux file context to filesystem
      ansible.builtin.command: restorecon -irv /srv/tecmint/data
